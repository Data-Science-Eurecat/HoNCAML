# This configuration file is an example of an advanced configuration
# Review all keys before using it in a HoNCAML pipeline
# For all details on configuration parameters, please see:
# TODO: Add configuration URL

global:
  problem_type: regression
  metrics_folder: honcaml_reports
steps:
  data:
    extract:
      filepath: data/raw/kc_house_data.csv
      target:
        - price
      features:
        - bedrooms
        - bathrooms
        - sqft_living
        - sqft_lot
        - floors
        - waterfront
        - view
        - condition
        - grade
        - sqft_above
        - sqft_basement
        - yr_built
        - yr_renovated
        - zipcode
        - lat
        - long
        - sqft_living15
        - sqft_lot15

    transform:
      normalize:
        features:
          module: sklearn.preprocessing.StandardScaler
          module_params:
            with_std: True
          columns:
            - bedrooms
            - bathrooms
        target:
          module: sklearn.preprocessing.StandardScaler
          module_params:
            with_std: True
          columns:
            - price

  benchmark:
    transform:
      metrics:
        - mean_squared_error
        - mean_absolute_percentage_error
        - median_absolute_error
        - r2_score
        - mean_absolute_error
        - root_mean_square_error
      models:
        - module: sklearn.ensemble.RandomForestRegressor
          search_space:
            n_estimators:
              method: randint
              values: [ 2, 110 ]
            max_features:
              method: choice
              values:
                - sqrt
                - log2
                - 1 # It means 'auto'
        - module: sklearn.linear_model.LinearRegression
          search_space:
            fit_intercept:
              method: choice
              values:
                - True
                - False
      cross_validation:
        strategy: k_fold
        n_splits: 2
        shuffle: True
        random_state: 90
      tuner:
        search_algorithm:
          module: ray.tune.search.optuna.OptunaSearch
          params:
        tune_config:
          num_samples: 5
          metric: root_mean_square_error
          mode: min
        run_config:
          stop:
            training_iteration: 2
        scheduler:
          module: ray.tune.schedulers.HyperBandScheduler
          params:
